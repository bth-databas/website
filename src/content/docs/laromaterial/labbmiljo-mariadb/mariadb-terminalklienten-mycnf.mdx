---
title: "Skapa konfigurationsfilen my.cnf"
description: "Konfigurationsfilen gör det möjligt att spara standardvärden för anslutning till databasservern."
sidebar:
    order: 550
---

import Figure from '@components/CustomFigure.astro';
import YouTube from '@components/YouTube.astro';



Vi sätter upp en miljö där vi använder konfigurationsfilen `my.cnf` för att förenkla och slippa skriva långa kommandon när vi startar terminalklienten för databasen MariaDB.



## Förutsättning

Du har installerat databasen MariaDB och du kan koppla upp dig mot den med en terminalklient.

Du har skapat en användare i databasen MariaDB som du kan använda för att koppla upp dig mot databasservern. Vi använder alltid användaren `dbadm` i kursen.

Du kan hantera terminalen och navigera i din hemmakatalog.



## Läs på om konfigurationsfilen 


Du kan läsa om hur det fungerar i artikeln "[Configuring MariaDB with Option Files](https://mariadb.com/kb/en/configuring-mariadb-with-option-files/)".



## Ett exempel på filen konfigurationsfilen


Med tanke på hur vi installerar databasen MariaDB så kan följande exempel fungera som en mall för filen `my.cnf`.

```text
# Template config file for databas >= 2026

[client]
user=dbadm
password=P@ssw0rd

# hostname not needed to change
#host=127.0.0.1
#host=<hostname>.local

# port and protocol not needed to change
#port=3306
#protocol=tcp

[mysql]
# To allow for using LOAD DATA INFILE
loose-local-infile = 1
```

Du behöver eventuellt anpassa filen till ditt system med till exempel inställningar för hosten ovan. Du kan också ha en sådan här fil i varje terminal (Windows: CMD, Cygwin, WSL) du använder.



## Spara konfigurationsfilen 

Filen heter `my.cnf`, eller `.my.cnf`, beroende av var du sparar den. Konfigurationsfilen behöver sparas på en plats där din terminalklient kan läsa den.

Vi skall spara filen `.my.cnf` i din hemmakatalog i den terminal du använder. En punkt framför filnamnet gör filen till en "dold fil". Dolda filer visas inte när man gör `ls`, man behöver göra `ls -a` för att visa dem.

I alla bash-terminal (Linux, macOS, WSL2 bash) innebär det att du enklast placerar filen i `$HOME/.my.cnf` vilket är samma sak som `~/.my.cnf`.

Du kan skapa filen så här, öppna din terminal och öppna vscode för att editera filen.

```bash title="Skapa filen .my.cnf i bash-terminal med vscode"
code ~/.my.cnf
```

Klistra in innehållet från exemplet ovan i filen och spara den.

Du kan kontrollera att du lagt filen på rätt plats så här.

```bash title="Kontrollera att filen .my.cnf finns på rätt plats"
# Visa filen och dess rättigheter
ls -l ~/.my.cnf
```

Det kan se ut så här.

```text
$ ls -l ~/.my.cnf
-rw-rw-r-- 1 mos mos 322 feb  7  2025 /home/mos/.my.cnf
```

DU kan också titta på filens innehåll med kommandot `cat`.

```bash title="Kontrollera att filen .my.cnf innehåller rätt detaljer"
# Visa innehållet i filen
cat ~/.my.cnf
```



## Sätt rättigheter på filen my.cnf

Du behöver också sätta rättigheterna på filen till 600 vilket innebär att bara du kan läsa filen.

```bash title="Sätt rättigheter på filen .my.cnf"
chmod 600 ~/.my.cnf
```

Du kan kontrollera att rättigheterna är korrekta med `ls -l` igen.

```bash title="Kontrollera rättigheter på filen .my.cnf"
ls -l ~/.my.cnf
```
Det skall nu se ut så här.

```text
$ ls -l ~/.my.cnf
-rw------- 1 mos mos 322 feb  7  2025 /home/mos/.my.cnf
```

Bra, nu är filen klar att användas.

:::note

Om du har för öppna filrättigheter så kan du få felmeddelande som påpekar att konfigurationsfilens rättigheter är alltför vidlyftiga.

Felmeddelandet kan säga följande.

> "mysql: [Warning] World-writable config file '/home/mos/.my.cnf' is ignored."
:::



## Starta terminalklienten med my.cnf

Nu kan du starta terminalklienten så här, utan att ange användare och lösenord.

```bash title="Starta terminalklienten mariadb med my.cnf"
mariadb
```

Om det fungerar så blir du direkt inloggad i terminalklienten utan att behöva ange användare och lösenord.



## Felsökning

Om du hamnar i bekymmer kan följande steg hjälpa dig att felsöka.



### Filens rättigheter

Om du har för öppna filrättigheter så kan du få felmeddelande som påpekar att konfigurationsfilens rättigheter är alltför vidlyftiga.

Felmeddelandet kan säga följande.

> "mysql: [Warning] World-writable config file '/home/mos/.my.cnf' is ignored."

Du löser det genom att sätta rättigheter till 600 på filen.



### Testa om my.cnf används 

Du kan testa och se exakt vilka detaljer från konfigurationsfilen som används.

Det kan till exempel se ut så här med vår konfigurationsfil som exempel.

```bash title="Testa vilka argument som terminalklienten mariadb använder"
$ mariadb --print-defaults
mariadb would have been started with the following arguments:
--user=dbadm --password=P@ssw0rd --loose-local-infile=1
```

Om du inte får fram önskat resultat så provar du att kontrollera att du verkligen lagt din `my.cnf` på en plats som stöds av just din terminalklient.



### Var kan man placera my.cnf?

För att kontrollera vilka filer som terminalklienten läser så kör du kommandot `mariadb --help`, det kommer en hel del utskrift och sedan skrollar du tillbaka till början av utskriften, där ser du i vilken ordning som klienten läser in konfigurationsfilerna.

```text
Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf

The following groups are read:
mysql client client-server client-mariadb
```

Dubbelkolla att du lagt filen på en av de platser som listas där.



## Avslutningsvis

Nu skall det fungera. Denna konfigurationsfilen är bra att ha och jobbar man mycket med terminalprogrammen så kan det underlätta att spara viss konfigurationsinformation i filen.

